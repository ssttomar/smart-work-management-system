{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sst70\\\\OneDrive\\\\Desktop\\\\swms-frontend\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\n/**\r\n * ProtectedRoute.js — guards routes that require authentication or a specific role.\r\n *\r\n * Usage in App.js:\r\n *   <Route element={<ProtectedRoute />}>\r\n *     <Route path=\"/admin/dashboard\" element={<AdminDashboard />} />\r\n *   </Route>\r\n *\r\n *   <Route element={<ProtectedRoute allowedRoles={['ADMIN']} />}>\r\n *     <Route path=\"/admin/users\" element={<Users />} />\r\n *   </Route>\r\n *\r\n * HOW IT WORKS:\r\n *   1. If no user in context (not logged in) → redirect to /login\r\n *   2. If allowedRoles is supplied and user's role is not in it → redirect to\r\n *      their own dashboard (prevents URL-bar privilege escalation)\r\n *   3. Otherwise render the child route via <Outlet />\r\n */\nimport React from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DASHBOARD_BY_ROLE = {\n  ADMIN: '/admin/dashboard',\n  MANAGER: '/manager/dashboard',\n  EMPLOYEE: '/employee/dashboard'\n};\nexport default function ProtectedRoute({\n  allowedRoles\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n\n  // Not authenticated at all\n  if (!user) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 21\n  }, this);\n\n  // Authenticated but wrong role\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\n    var _DASHBOARD_BY_ROLE$us;\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: (_DASHBOARD_BY_ROLE$us = DASHBOARD_BY_ROLE[user.role]) !== null && _DASHBOARD_BY_ROLE$us !== void 0 ? _DASHBOARD_BY_ROLE$us : '/login',\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 10\n  }, this);\n}\n_s(ProtectedRoute, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","Outlet","useAuth","jsxDEV","_jsxDEV","DASHBOARD_BY_ROLE","ADMIN","MANAGER","EMPLOYEE","ProtectedRoute","allowedRoles","_s","user","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","includes","role","_DASHBOARD_BY_ROLE$us","_c","$RefreshReg$"],"sources":["C:/Users/sst70/OneDrive/Desktop/swms-frontend/src/components/ProtectedRoute.js"],"sourcesContent":["/**\r\n * ProtectedRoute.js — guards routes that require authentication or a specific role.\r\n *\r\n * Usage in App.js:\r\n *   <Route element={<ProtectedRoute />}>\r\n *     <Route path=\"/admin/dashboard\" element={<AdminDashboard />} />\r\n *   </Route>\r\n *\r\n *   <Route element={<ProtectedRoute allowedRoles={['ADMIN']} />}>\r\n *     <Route path=\"/admin/users\" element={<Users />} />\r\n *   </Route>\r\n *\r\n * HOW IT WORKS:\r\n *   1. If no user in context (not logged in) → redirect to /login\r\n *   2. If allowedRoles is supplied and user's role is not in it → redirect to\r\n *      their own dashboard (prevents URL-bar privilege escalation)\r\n *   3. Otherwise render the child route via <Outlet />\r\n */\r\nimport React from 'react';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst DASHBOARD_BY_ROLE = {\r\n  ADMIN:    '/admin/dashboard',\r\n  MANAGER:  '/manager/dashboard',\r\n  EMPLOYEE: '/employee/dashboard',\r\n};\r\n\r\nexport default function ProtectedRoute({ allowedRoles }) {\r\n  const { user } = useAuth();\r\n\r\n  // Not authenticated at all\r\n  if (!user) return <Navigate to=\"/login\" replace />;\r\n\r\n  // Authenticated but wrong role\r\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\r\n    return <Navigate to={DASHBOARD_BY_ROLE[user.role] ?? '/login'} replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n}\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AACnD,SAASC,OAAO,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,iBAAiB,GAAG;EACxBC,KAAK,EAAK,kBAAkB;EAC5BC,OAAO,EAAG,oBAAoB;EAC9BC,QAAQ,EAAE;AACZ,CAAC;AAED,eAAe,SAASC,cAAcA,CAAC;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EACvD,MAAM;IAAEC;EAAK,CAAC,GAAGV,OAAO,CAAC,CAAC;;EAE1B;EACA,IAAI,CAACU,IAAI,EAAE,oBAAOR,OAAA,CAACJ,QAAQ;IAACa,EAAE,EAAC,QAAQ;IAACC,OAAO;EAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;;EAElD;EACA,IAAIR,YAAY,IAAI,CAACA,YAAY,CAACS,QAAQ,CAACP,IAAI,CAACQ,IAAI,CAAC,EAAE;IAAA,IAAAC,qBAAA;IACrD,oBAAOjB,OAAA,CAACJ,QAAQ;MAACa,EAAE,GAAAQ,qBAAA,GAAEhB,iBAAiB,CAACO,IAAI,CAACQ,IAAI,CAAC,cAAAC,qBAAA,cAAAA,qBAAA,GAAI,QAAS;MAACP,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC3E;EAEA,oBAAOd,OAAA,CAACH,MAAM;IAAAc,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnB;AAACP,EAAA,CAZuBF,cAAc;EAAA,QACnBP,OAAO;AAAA;AAAAoB,EAAA,GADFb,cAAc;AAAA,IAAAa,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
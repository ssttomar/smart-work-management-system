{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sst70\\\\OneDrive\\\\Desktop\\\\swms-frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/**\r\n * AuthContext.js — global authentication state via React Context API.\r\n *\r\n * WHAT IT PROVIDES:\r\n *   user      → { token, role, name, email, userId } | null\r\n *   login()   → stores auth data in state + localStorage\r\n *   logout()  → clears state + localStorage, redirects to /login\r\n *   isAdmin() / isManager() / isEmployee() — role helpers\r\n *\r\n * WHY CONTEXT (not Redux):\r\n *   The auth state is needed in many components (Navbar, ProtectedRoute,\r\n *   dashboards). Context provides this without prop drilling, and the state\r\n *   here is simple enough not to warrant Redux boilerplate.\r\n *\r\n * HOW TOKEN PERSISTENCE WORKS:\r\n *   On page refresh, React state is lost. We save the token to localStorage\r\n *   on login and re-hydrate from it on mount (see initial state below).\r\n */\nimport React, { createContext, useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\n// Re-hydrate from localStorage so refresh doesn't log the user out\nconst storedUser = localStorage.getItem('swms_user');\nconst initialUser = storedUser ? JSON.parse(storedUser) : null;\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(initialUser);\n  const navigate = useNavigate();\n\n  /**\r\n   * Call this after a successful /auth/login or /auth/register response.\r\n   * @param {Object} authData - { token, role, name, email, userId }\r\n   */\n  const login = authData => {\n    localStorage.setItem('swms_token', authData.token);\n    localStorage.setItem('swms_user', JSON.stringify(authData));\n    setUser(authData);\n\n    // Redirect to the correct dashboard based on role\n    if (authData.role === 'ADMIN') navigate('/admin/dashboard');else if (authData.role === 'MANAGER') navigate('/manager/dashboard');else navigate('/employee/dashboard');\n  };\n  const logout = () => {\n    localStorage.removeItem('swms_token');\n    localStorage.removeItem('swms_user');\n    setUser(null);\n    navigate('/login');\n  };\n  const isAdmin = () => (user === null || user === void 0 ? void 0 : user.role) === 'ADMIN';\n  const isManager = () => (user === null || user === void 0 ? void 0 : user.role) === 'MANAGER';\n  const isEmployee = () => (user === null || user === void 0 ? void 0 : user.role) === 'EMPLOYEE';\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      login,\n      logout,\n      isAdmin,\n      isManager,\n      isEmployee\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n/** Convenience hook — use in any component: const { user, logout } = useAuth(); */\n_s(AuthProvider, \"DHoiZkeUB7agsS1UFvCyE6D8CzA=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used inside <AuthProvider>');\n  return ctx;\n}\n_s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useNavigate","jsxDEV","_jsxDEV","AuthContext","storedUser","localStorage","getItem","initialUser","JSON","parse","AuthProvider","children","_s","user","setUser","navigate","login","authData","setItem","token","stringify","role","logout","removeItem","isAdmin","isManager","isEmployee","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","ctx","Error","$RefreshReg$"],"sources":["C:/Users/sst70/OneDrive/Desktop/swms-frontend/src/context/AuthContext.js"],"sourcesContent":["/**\r\n * AuthContext.js — global authentication state via React Context API.\r\n *\r\n * WHAT IT PROVIDES:\r\n *   user      → { token, role, name, email, userId } | null\r\n *   login()   → stores auth data in state + localStorage\r\n *   logout()  → clears state + localStorage, redirects to /login\r\n *   isAdmin() / isManager() / isEmployee() — role helpers\r\n *\r\n * WHY CONTEXT (not Redux):\r\n *   The auth state is needed in many components (Navbar, ProtectedRoute,\r\n *   dashboards). Context provides this without prop drilling, and the state\r\n *   here is simple enough not to warrant Redux boilerplate.\r\n *\r\n * HOW TOKEN PERSISTENCE WORKS:\r\n *   On page refresh, React state is lost. We save the token to localStorage\r\n *   on login and re-hydrate from it on mount (see initial state below).\r\n */\r\nimport React, { createContext, useContext, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\n// Re-hydrate from localStorage so refresh doesn't log the user out\r\nconst storedUser = localStorage.getItem('swms_user');\r\nconst initialUser = storedUser ? JSON.parse(storedUser) : null;\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(initialUser);\r\n  const navigate = useNavigate();\r\n\r\n  /**\r\n   * Call this after a successful /auth/login or /auth/register response.\r\n   * @param {Object} authData - { token, role, name, email, userId }\r\n   */\r\n  const login = (authData) => {\r\n    localStorage.setItem('swms_token', authData.token);\r\n    localStorage.setItem('swms_user',  JSON.stringify(authData));\r\n    setUser(authData);\r\n\r\n    // Redirect to the correct dashboard based on role\r\n    if (authData.role === 'ADMIN')   navigate('/admin/dashboard');\r\n    else if (authData.role === 'MANAGER') navigate('/manager/dashboard');\r\n    else navigate('/employee/dashboard');\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('swms_token');\r\n    localStorage.removeItem('swms_user');\r\n    setUser(null);\r\n    navigate('/login');\r\n  };\r\n\r\n  const isAdmin    = () => user?.role === 'ADMIN';\r\n  const isManager  = () => user?.role === 'MANAGER';\r\n  const isEmployee = () => user?.role === 'EMPLOYEE';\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, isAdmin, isManager, isEmployee }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n/** Convenience hook — use in any component: const { user, logout } = useAuth(); */\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error('useAuth must be used inside <AuthProvider>');\r\n  return ctx;\r\n}\r\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAClE,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,WAAW,gBAAGN,aAAa,CAAC,IAAI,CAAC;;AAEvC;AACA,MAAMO,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;AACpD,MAAMC,WAAW,GAAGH,UAAU,GAAGI,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,GAAG,IAAI;AAE9D,OAAO,SAASM,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAACQ,WAAW,CAAC;EAC7C,MAAMQ,QAAQ,GAAGf,WAAW,CAAC,CAAC;;EAE9B;AACF;AACA;AACA;EACE,MAAMgB,KAAK,GAAIC,QAAQ,IAAK;IAC1BZ,YAAY,CAACa,OAAO,CAAC,YAAY,EAAED,QAAQ,CAACE,KAAK,CAAC;IAClDd,YAAY,CAACa,OAAO,CAAC,WAAW,EAAGV,IAAI,CAACY,SAAS,CAACH,QAAQ,CAAC,CAAC;IAC5DH,OAAO,CAACG,QAAQ,CAAC;;IAEjB;IACA,IAAIA,QAAQ,CAACI,IAAI,KAAK,OAAO,EAAIN,QAAQ,CAAC,kBAAkB,CAAC,CAAC,KACzD,IAAIE,QAAQ,CAACI,IAAI,KAAK,SAAS,EAAEN,QAAQ,CAAC,oBAAoB,CAAC,CAAC,KAChEA,QAAQ,CAAC,qBAAqB,CAAC;EACtC,CAAC;EAED,MAAMO,MAAM,GAAGA,CAAA,KAAM;IACnBjB,YAAY,CAACkB,UAAU,CAAC,YAAY,CAAC;IACrClB,YAAY,CAACkB,UAAU,CAAC,WAAW,CAAC;IACpCT,OAAO,CAAC,IAAI,CAAC;IACbC,QAAQ,CAAC,QAAQ,CAAC;EACpB,CAAC;EAED,MAAMS,OAAO,GAAMA,CAAA,KAAM,CAAAX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,IAAI,MAAK,OAAO;EAC/C,MAAMI,SAAS,GAAIA,CAAA,KAAM,CAAAZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,IAAI,MAAK,SAAS;EACjD,MAAMK,UAAU,GAAGA,CAAA,KAAM,CAAAb,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,IAAI,MAAK,UAAU;EAElD,oBACEnB,OAAA,CAACC,WAAW,CAACwB,QAAQ;IAACC,KAAK,EAAE;MAAEf,IAAI;MAAEG,KAAK;MAAEM,MAAM;MAAEE,OAAO;MAAEC,SAAS;MAAEC;IAAW,CAAE;IAAAf,QAAA,EAClFA;EAAQ;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B;;AAEA;AAAApB,EAAA,CArCgBF,YAAY;EAAA,QAETV,WAAW;AAAA;AAAAiC,EAAA,GAFdvB,YAAY;AAsC5B,OAAO,SAASwB,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACxB,MAAMC,GAAG,GAAGtC,UAAU,CAACK,WAAW,CAAC;EACnC,IAAI,CAACiC,GAAG,EAAE,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EACvE,OAAOD,GAAG;AACZ;AAACD,GAAA,CAJeD,OAAO;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}